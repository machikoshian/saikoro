<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=670" />
    <link rel="stylesheet" type="text/css" href="dice.css">
    <link rel="icon" sizes="192x192" type="image/png" href="icon.png">
    <title>Dices</title>
  </head>
  <body>
    <div class="dice_view">
      <div id="dice1" class="dice">
        <div class="cube face1">
          <div class="dice_face pip1">1</div><div class="dice_face pip2">2</div><div class="dice_face pip3">3</div>
          <div class="dice_face pip4">4</div><div class="dice_face pip5">5</div><div class="dice_face pip6">6</div>
        </div>
      </div>
      <div id="dice2" class="dice">
        <div class="cube face1">
          <div class="dice_face pip1">1</div><div class="dice_face pip2">2</div><div class="dice_face pip3">3</div>
          <div class="dice_face pip4">4</div><div class="dice_face pip5">5</div><div class="dice_face pip6">6</div>
        </div>
      </div>
      <div id="dice3" class="dice">
        <div class="cube face1">
          <div class="dice_face pip1">1</div><div class="dice_face pip2">2</div><div class="dice_face pip3">3</div>
          <div class="dice_face pip4">4</div><div class="dice_face pip5">5</div><div class="dice_face pip6">6</div>
        </div>
      </div>
      <div id="dice4" class="dice">
        <div class="cube face1">
          <div class="dice_face pip1">1</div><div class="dice_face pip2">2</div><div class="dice_face pip3">3</div>
          <div class="dice_face pip4">4</div><div class="dice_face pip5">5</div><div class="dice_face pip6">6</div>
        </div>
      </div>
      <div id="dice5" class="dice">
        <div class="cube face1">
          <div class="dice_face pip1">1</div><div class="dice_face pip2">2</div><div class="dice_face pip3">3</div>
          <div class="dice_face pip4">4</div><div class="dice_face pip5">5</div><div class="dice_face pip6">6</div>
        </div>
      </div>
      <div id="dice6" class="dice">
        <div class="cube face1">
          <div class="dice_face pip1">1</div><div class="dice_face pip2">2</div><div class="dice_face pip3">3</div>
          <div class="dice_face pip4">4</div><div class="dice_face pip5">5</div><div class="dice_face pip6">6</div>
        </div>
      </div>
    </div>
    <input id="stop" type="button" value="stop" />
    <script>
let dices = [];
for (let i = 0; i < 6; ++i) {
  dices.push(document.getElementById(`dice${i+1}`));
  dices[i].style.animation = "roll 0.5s linear infinite";
}

let button = document.getElementById("stop");
let is_running = true;

function stopAnimation() {
  for (let i = 0; i < 6; ++i) {
    dices[i].style.animation = `roll_end${i+1} 0.5s ease-out forwards`;
  }
}

button.addEventListener("click", () => {
  for (let i = 0; i < 6; ++i) {
    if (is_running) {
      dices[i].addEventListener("animationiteration", stopAnimation);
    } else {
      dices[i].removeEventListener("animationiteration", stopAnimation);
      dices[i].style.animation = "roll 0.5s linear infinite";
    }
  }
  is_running = !is_running;
  button.value = is_running ? "stop" : "start";
});
    </script>
  </body>
</html>
